<h2><a href=https://www.codewars.com/kata/555185132c0d4cca3d000197/train/javascript target="_blank">I Spy</a></h2><h3>5 kyu</h3><p>NOTE: The test cases for this kata are broken, but for some reason CodeWars has locked them and I cannot edit them. Specifically, the <code>returned</code> function is not propertly testing that old values are remembered. If and when I can fix the problem, I will, but I don't see any way to do that due to the lock.</p><hr><p>In testing, a <code>spy</code> function is one that keeps track of various metadata regarding its invocations. Some examples of properties that a spy might track include:</p><ul><li>Whether it was invoked</li><li>How many times it was invoked</li><li>What arguments it was called with</li><li>What contexts it was called in</li><li>What values it returned</li><li>Whether it threw an error</li></ul><p>For this kata, implement a <code>spyOn</code> function which takes any function <code>func</code> as a parameter and returns a <code>spy</code> for <code>func</code>. The returned <code>spy</code> must be callable in the same manner as the original <code>func</code>, and include the following additional properties/methods:</p><ul><li><code>.callCount()</code> — returns the number of times <code>spy</code> has been called</li><li><code>.wasCalledWith(val)</code> – returns <code>true</code> if <code>spy</code> was ever called with <code>val</code>, else returns <code>false</code>.</li><li><code>.returned(val)</code> — returns <code>true</code> if <code>spy</code> ever returned <code>val</code>, else returns <code>false</code></li></ul><p>Below is a specific example of how <code>spyOn</code> might work in the wild.</p><pre><code class="language-javascript"><span class="cm-keyword">function</span> <span class="cm-def">adder</span>(<span class="cm-def">n1</span>, <span class="cm-def">n2</span>) { <span class="cm-keyword">return</span> <span class="cm-variable-2">n1</span> <span class="cm-operator">+</span> <span class="cm-variable-2">n2</span>; }<span class="cm-keyword">var</span> <span class="cm-def">adderSpy</span> <span class="cm-operator">=</span> <span class="cm-variable">spyOn</span>( <span class="cm-variable">adder</span> );<span class="cm-variable">adderSpy</span>(<span class="cm-number">2</span>, <span class="cm-number">4</span>); <span class="cm-comment">// returns 6</span><span class="cm-variable">adderSpy</span>(<span class="cm-number">3</span>, <span class="cm-number">5</span>); <span class="cm-comment">// returns 8</span><span class="cm-variable">adderSpy</span>.<span class="cm-property">callCount</span>(); <span class="cm-comment">// returns 2</span><span class="cm-variable">adderSpy</span>.<span class="cm-property">wasCalledWith</span>(<span class="cm-number">4</span>); <span class="cm-comment">// true</span><span class="cm-variable">adderSpy</span>.<span class="cm-property">wasCalledWith</span>(<span class="cm-number">0</span>); <span class="cm-comment">// false</span><span class="cm-variable">adderSpy</span>.<span class="cm-property">returned</span>(<span class="cm-number">8</span>); <span class="cm-comment">// true</span><span class="cm-variable">adderSpy</span>.<span class="cm-property">returned</span>(<span class="cm-number">0</span>); <span class="cm-comment">// false</span></code></pre>